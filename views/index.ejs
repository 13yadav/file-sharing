<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>File sharing</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  </head>
  <body class="bg-gradient-to-br from-gray-800 to-gray-900 text-white flex flex-col items-center justify-center h-screen">
    <form
      action="/upload"
      method="post"
      enctype="multipart/form-data"
      class="bg-gray-800 bg-opacity-75 p-6 rounded-md shadow-md max-w-md"
    >
      <% if (locals.fileLink != null) { %>
        <div class="bg-green-400 py-3 px-6 rounded-md shadow-md mb-4 max-w-md text-center">
          <p class="text-white mb-1">Your file has been uploaded!</p>
          <a href="<%= locals.fileLink %>" class="text-green-800 underline">Download Your File</a>
        </div>
      <% } %>
      <label for="file" class="block text-sm font-medium text-gray-300 mb-1">File:</label>
      <label for="file" class="w-full bg-gray-700 text-gray-300 p-3 rounded-md flex flex-col items-center justify-center">
        <span id="fileName" class="truncate">Choose a file...</span>
        <input type="file" id="file" name="file" class="sr-only" />
        <span class="text-blue-500 cursor-pointer hover:text-blue-600 mt-2">Browse</span>
      </label>

      <label for="password" class="block text-sm font-medium text-gray-300 mt-4">Password:</label>
      <input type="password" id="password" name="password" class="mt-1 p-2 border rounded-md w-full bg-gray-700 text-gray-300" />

      <button type="submit" class="mt-4 bg-blue-500 text-white p-2 rounded-md w-full hover:bg-blue-600">Share</button>
    </form>

    <script>
      const fileInput = document.getElementById('file');
      const fileName = document.getElementById('fileName');

      fileInput.addEventListener('change', function (e) {
        fileName.textContent = e.target.files[0]?.name || 'Choose a file...';
      });
    </script>
  </body>
</html>
